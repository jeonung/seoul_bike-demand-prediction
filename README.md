# 🚲 개별·행정동·자치구 수준에서의 따릉이 수요 예측 분석

서울시 공공자전거 서비스인 **따릉이**의 수요를 예측함으로써 자전거 대여소의 운영 효율을 높이고, 도시 환경 개선에 기여하고자 진행한 프로젝트입니다. 개별 대여소, 행정동, 자치구 단위로 모델을 비교 분석하여 최적의 예측 단위를 탐색합니다.

---

## 💻 기술 스택

- **Language**: R
- **Libraries**:
  - **Data Handling**: `dplyr`
  - **Machine Learning**: `randomForest`, `xgboost`
  - **Visualization**: `ggplot2`, `cowplot`, `gridExtra`
- **Dataset Source**: [서울시 공공데이터 포털](https://data.seoul.go.kr/dataList/5/literacyView.do)

---

## 📑 목차

1. [프로젝트 소개](#1-프로젝트-소개)  
   1.1 [배경](#11-배경)  
   1.2 [연구 목표](#13-연구-목표)  
2. [프로젝트 개요](#2-프로젝트-개요)  
   2.1 [데이터 수집](#21-데이터-수집)  
   2.2 [데이터 가공](#22-데이터-가공)  
   2.3 [기계학습 모델 구축](#23-기계학습-모델-구축)  
   2.4 [분석 결과](#24-분석-결과)  

---

## 1. 프로젝트 소개

### 1.1 배경  

![seoul_bike](images/seoul_bike.jpg)  

서울시는 공공자전거 ‘따릉이’ 서비스를 운영하고 있으며, 이로 인해 도심 속 교통 수단의 다양화와 친환경 이동 수단의 확대를 도모하고 있습니다. 그러나 일부 지역에서는 반납량과 대여량의 불균형으로 인해 자전거가 쌓이거나 부족해지는 문제가 발생하고 있습니다. 특히 도로 미관을 해치거나 시민 불편을 초래할 수 있어, 이를 해결하기 위한 수요 예측이 필요한 상황입니다.

### 1.2 연구 목표  

- 따릉이 수요(대여량 및 반납량) 예측
- 예측 단위를 **개별 대여소**, **행정동**, **자치구** 수준으로 구분하여 비교  
- 모델 운영에 따른 비용과 정확도를 고려한 최적의 단위 제안

---

## 2. 프로젝트 개요

### ![workflow](images/seoul_bike_workflow.png)
> プロジェクトのワークフロー

### 2.1 데이터 수집  

- **수집 데이터**: 따릉이 대여 및 반납 이력  
- **보조 변수**: 날씨 정보, 생활인구, 대중교통 이용량  
  
### 2.2 데이터 가공  

- 대여/반납 이력 데이터를 **대여량/반납량 형태로 변환**  
- 대여소의 위치 정보에 기반하여 날씨 및 인구 데이터 **매칭**

### 2.3 기계학습 모델 구축  

#### 샘플링 전략  
- 전체 데이터를 사용하기에는 프로젝트 여건 상 어렵다고 판단하여, 대학교가 위치한 **광진구**를 타깃 지역으로 선정  
- 또한, 광진구 내의 **개별 대여소 50개 중 11개**를 샘플링하여 분석

#### 사용 모델 및 특성  
| 모델        | 특징                          |
|-------------|-------------------------------|
| Elastic Net | 선형 모델 (L1 + L2 정규화)      |
| Random Forest | 비선형 모델, 배깅 방식           |
| XGBoost     | 비선형 모델, 부스팅 방식         |

#### 🛠 변수 선택
| 모델        | 변수 선택                          |
|-------------|-------------------------------|
| Elastic Net | Stepwise selection      |
| Random Forest & XGBoost | Feature Importance가 0.1% 미만인 변수 제거             |

#### 하이퍼 파라미터 튜닝  
> ![tuning](images/tuning.png)
- 하이퍼파라미터는 Validation Error 감소가 정체되는 지점을 기준으로 설정  

### 2.4 분석 결과  

> ![result](images/result.png)

- **정확도 비교**:
  - 개별 대여소 > 행정동 > 자치구 순  

#### 결론
- 개별 단위 모델은 정확도가 높지만 모델의 유지보수 부담이 큼  
- 자치구 단위 모델은 정확도가 낮아 실효성이 떨어짐
- 비용과 정확도 사이에서 프로젝트 여건에 맞는 기계학습 모델을 선정하는 게 중요

